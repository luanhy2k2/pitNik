<div class="wavy-wraper">
  <div class="wavy">
    <span style="--i:1;">p</span>
    <span style="--i:2;">i</span>
    <span style="--i:3;">t</span>
    <span style="--i:4;">n</span>
    <span style="--i:5;">i</span>
    <span style="--i:6;">k</span>
    <span style="--i:7;">.</span>
    <span style="--i:8;">.</span>
    <span style="--i:9;">.</span>
  </div>
</div>
<div class="theme-layout">

  <div class="postoverlay"></div>

  <div  class="responsive-header">
    <div style="background-color: #34465d;padding-left: 10px;" class="mh-head first Sticky">
      <span style="float: left; padding-top: 10px; " class="mh-text">
        <a routerLink="/" title=""><img src="./assets/images/logo.png" alt=""></a>
      </span>
     
      <div style="float: right; width: 50%;" class="top-area">
        <ul style="display: flex; float: right; padding-top: 10px;" class="setting-area">
          <li class="liResonsive">
            <a href="#" title="Friend Requests" data-ripple="">
              <i class="fa fa-user"></i><em class="bg-red">{{CountFriendShipPending()}}</em>
            </a>
            <div class="dropdowns">
              <span>5 New Requests <a href="#" title="">View all Requests</a></span>
              <ul class="drops-menu">
                <li *ngFor="let x of FriendPending.items">
                  <div>
                    <figure>
                      <img *ngIf="x.senderImage; else nullUserImage;" class="image" style="max-height: 30px; width: 100%;"
                        src="https://localhost:7261/Users/{{x.senderImage}}" alt="">
                      <ng-template #nullUserImage>
                        <img alt="" class="image" style="max-height: 30px; width: 100%;"
                          src="./assets/images/userDefault.png">
                      </ng-template>
                    </figure>
                    <div class="mesg-meta">
                      <h6><a href="#" title="">{{x.senderName}}</a></h6>
                      <span><b>Amy</b> is mutule friend</span>
                      <i>yesterday</i>
                    </div>
                    <div class="add-del-friends">
                      <a (click)="UpdateFriendStatus(x.id,1)" title=""><i class="fa fa-heart"></i></a>
                      <a (click)="UpdateFriendStatus(x.id,2)" href="#" title=""><i class="fa fa-trash"></i></a>
                    </div>
                  </div>
                </li>
  
              </ul>
              <a href="friend-requests.html" title="" class="more-mesg">View All</a>
            </div>
          </li>
          <li class="liResonsive">
            <a href="#" title="Notification" data-ripple="">
              <i class="fa fa-bell"></i><em class="bg-purple">{{UnreadNotificationCount()}}</em>
            </a>
            <div class="dropdowns">
              <span>4 New Notifications <a href="#" title="">Mark all as read</a></span>
              <ul class="drops-menu">
                <li *ngFor=" let no of Notifications.items">
                  <a (click)="UpdateReadStatusNotification(no.id, true)" title="">
                    <figure>
                      <img *ngIf="no.sender.image; else nullUserImage;" style="height: 45px; width: 45px;" alt="author"
                        src="https://localhost:7261/Users/{{no.sender.image}}">
                      <ng-template #nullUserImage>
                        <img style="height: 45px; width: 45px;" src="./assets/images/userDefault.png">
                      </ng-template>
                      <span class="status f-online"></span>
                    </figure>
                    <div class="mesg-meta">
                      <h6>{{no.sender.name}}</h6>
                      <span [ngClass]="{'bold': no.isSeen == false}">{{no.content}}</span>
                      <i>{{no.created}}</i>
                    </div>
                  </a>
                </li>
  
              </ul>
              <a title="" class="more-mesg">View All</a>
            </div>
          </li>
          <li class="liResonsive">
            <a href="#" title="Messages" data-ripple=""><i class="fa fa-commenting"></i><em
                class="bg-blue">{{UnreadConversationCount()}}</em></a>
            <div class="dropdowns">
              <span>5 New Messages <a href="#" title="">Mark all as read</a></span>
              <ul class="drops-menu">
                <li *ngFor="let cvt of Conversations.items">
                  <ng-container *ngFor="let member of cvt.member">
                    <div *ngIf="member.isCurrentUser == false">
                      <a (click)="LoadMessageConverstion(cvt.id)" class="show-mesg" href="#" title="">
                        <figure>
                          <img *ngIf="member.image; else nullImageConversation;" style="height: 45px; width: 45px;"
                            alt="author" src="https://localhost:7261/Users/{{member.image}}">
                          <ng-template #nullImageConversation>
                            <img style="height: 45px; width: 45px;" alt="author" src="./assets/images/userDefault.png">
                          </ng-template>
                          <span *ngIf="cvt.isOnline" class="status f-online"></span>
                        </figure>
                        <div class="mesg-meta">
                          <h6>{{ member.name }}</h6>
                          <span [ngClass]="{'bold': cvt.isSeen == false}"> {{cvt.message}}</span>
                          <i>{{cvt.timeMessage}}</i>
                        </div>
                      </a>
                    </div>
  
                  </ng-container>
  
                </li>
  
              </ul>
              <a href="chat-messenger.html" title="" class="more-mesg">View All</a>
            </div>
          </li>
          <li class="liResonsive"><a [routerLink]="['/groups']"><i class="fas fa-users"></i></a>
  
          </li>
         
        </ul>
      </div>
      <span class="mh-btns-right">
        <div class="user-img">
          <img [routerLink]="['/about']" *ngIf="user"
          [src]="user.image ? 'https://localhost:7261/Users/' + user.image : './assets/images/userDefault.png'"
          style="width: 45px; height: 40px; border-radius: 100%;" alt="">
        </div>
        
      </span>
    </div>
   
    <div style="background-color: #34465d;" class="mh-head second">
      <form class="mh-form">
        <input placeholder="search" />
        <a href="#/" class="fa fa-search"></a>
      </form>
    </div>
    

  </div>

  <div class="topbar stick">
    <div class="logo">
      <a title="" [routerLink]="['/']"><img src="./assets/images/logo.png" alt=""></a>
    </div>
    <div class="top-area">
      <div class="top-search">
        <form method="post" class="">
          <input [(ngModel)]="keyword" name="keyword" type="text" placeholder="Nhập từ khoá...">
          <button (click)="Search()" data-ripple><i class="ti-search"></i></button>
        </form>
      </div>
      <div class="page-name">
        <span>Newsfeed</span>
      </div>
      <ul class="setting-area">
        <li><a href="newsfeed.html" title="Home" data-ripple=""><i class="fa fa-home"></i></a></li>
        <li>
          <a href="#" title="Friend Requests" data-ripple="">
            <i class="fa fa-user"></i><em class="bg-red">{{CountFriendShipPending()}}</em>
          </a>
          <div class="dropdowns">
            <span>5 New Requests <a href="#" title="">View all Requests</a></span>
            <ul class="drops-menu">
              <li *ngFor="let x of FriendPending.items">
                <div>
                  <figure>
                    <img *ngIf="x.senderImage; else nullUserImage;" class="image" style="max-height: 30px; width: 100%;"
                      src="https://localhost:7261/Users/{{x.senderImage}}" alt="">
                    <ng-template #nullUserImage>
                      <img alt="" class="image" style="max-height: 30px; width: 100%;"
                        src="./assets/images/userDefault.png">
                    </ng-template>
                  </figure>
                  <div class="mesg-meta">
                    <h6><a href="#" title="">{{x.senderName}}</a></h6>
                    <span><b>Amy</b> is mutule friend</span>
                    <i>yesterday</i>
                  </div>
                  <div class="add-del-friends">
                    <a (click)="UpdateFriendStatus(x.id,1)" title=""><i class="fa fa-heart"></i></a>
                    <a (click)="UpdateFriendStatus(x.id,2)" href="#" title=""><i class="fa fa-trash"></i></a>
                  </div>
                </div>
              </li>

            </ul>
            <a href="friend-requests.html" title="" class="more-mesg">View All</a>
          </div>
        </li>
        <li>
          <a href="#" title="Notification" data-ripple="">
            <i class="fa fa-bell"></i><em class="bg-purple">{{UnreadNotificationCount()}}</em>
          </a>
          <div class="dropdowns">
            <span>4 New Notifications <a href="#" title="">Mark all as read</a></span>
            <ul class="drops-menu">
              <li *ngFor=" let no of Notifications.items">
                <a (click)="UpdateReadStatusNotification(no.id, true)" title="">
                  <figure>
                    <img *ngIf="no.sender.image; else nullUserImage;" style="height: 45px; width: 45px;" alt="author"
                      src="https://localhost:7261/Users/{{no.sender.image}}">
                    <ng-template #nullUserImage>
                      <img style="height: 45px; width: 45px;" src="./assets/images/userDefault.png">
                    </ng-template>
                    <span class="status f-online"></span>
                  </figure>
                  <div class="mesg-meta">
                    <h6>{{no.sender.name}}</h6>
                    <span [ngClass]="{'bold': no.isSeen == false}">{{no.content}}</span>
                    <i>{{no.created}}</i>
                  </div>
                </a>
              </li>

            </ul>
            <a title="" class="more-mesg">View All</a>
          </div>
        </li>
        <li>
          <a href="#" title="Messages" data-ripple=""><i class="fa fa-commenting"></i><em
              class="bg-blue">{{UnreadConversationCount()}}</em></a>
          <div class="dropdowns">
            <span>5 New Messages <a href="#" title="">Mark all as read</a></span>
            <ul class="drops-menu">
              <li *ngFor="let cvt of Conversations.items">
                <ng-container *ngFor="let member of cvt.member">
                  <div *ngIf="member.isCurrentUser == false">
                    <a (click)="LoadMessageConverstion(cvt.id)" class="show-mesg" href="#" title="">
                      <figure>
                        <img *ngIf="member.image; else nullImageConversation;" style="height: 45px; width: 45px;"
                          alt="author" src="https://localhost:7261/Users/{{member.image}}">
                        <ng-template #nullImageConversation>
                          <img style="height: 45px; width: 45px;" alt="author" src="./assets/images/userDefault.png">
                        </ng-template>
                        <span *ngIf="cvt.isOnline" class="status f-online"></span>
                      </figure>
                      <div class="mesg-meta">
                        <h6>{{ member.name }}</h6>
                        <span [ngClass]="{'bold': cvt.isSeen == false}"> {{cvt.message}}</span>
                        <i>{{cvt.timeMessage}}</i>
                      </div>
                    </a>
                  </div>

                </ng-container>

              </li>

            </ul>
            <a href="chat-messenger.html" title="" class="more-mesg">View All</a>
          </div>
        </li>
        <li><a [routerLink]="['/groups']"><i class="fas fa-users"></i></a>

        </li>
        <li><a href="#" title="Help" data-ripple=""><i class="fa fa-question-circle"></i></a>
          <div class="dropdowns helps">
            <span>Quick Help</span>
            <form method="post">
              <input type="text" placeholder="How can we help you?">
            </form>
            <span>Help with this page</span>
            <ul class="help-drop">
              <li><a href="forum.html" title=""><i class="fa fa-book"></i>Community & Forum</a></li>
              <li><a href="faq.html" title=""><i class="fa fa-question-circle-o"></i>FAQs</a></li>
              <li><a href="career.html" title=""><i class="fa fa-building-o"></i>Carrers</a></li>
              <li><a href="privacy.html" title=""><i class="fa fa-pencil-square-o"></i>Terms & Policy</a></li>
              <li><a href="#" title=""><i class="fa fa-map-marker"></i>Contact</a></li>
              <li><a href="#" title=""><i class="fa fa-exclamation-triangle"></i>Report a Problem</a></li>
            </ul>
          </div>
        </li>
      </ul>
      <div class="user-img">
        <h5>{{user.name}}</h5>
        <img *ngIf="user"
          [src]="user.image ? 'https://localhost:7261/Users/' + user.image : './assets/images/userDefault.png'"
          style="width: 45px; height: 45px;" alt="">
        <span class="status f-online"></span>
        <div class="user-setting">
          <ul class="log-out">
            <li><a [routerLink]="['/about']" title=""><i class="ti-user"></i> view profile</a></li>
            <li><a href="setting.html" title=""><i class="ti-pencil-alt"></i>edit profile</a></li>
            <li><a href="#" title=""><i class="ti-target"></i>activity log</a></li>
            <li><a [routerLink]="['/setting']" title=""><i class="ti-settings"></i>account setting</a></li>
            <li (click)="logOut()"><a title=""><i class="ti-power-off"></i>log out</a></li>
          </ul>
        </div>
      </div>
      <span class="ti-settings main-menu" data-ripple=""></span>
    </div>

  </div>
  <div [ngClass]="{'hidden': isHidden}" class="chat-box show fixed-corner">
    <div class="chat-head">
      <span class="status f-online"></span>
      <h6>Bucky Barnes</h6>
      <div class="more">
        <div class="more-optns"><i class="ti-more-alt"></i>
          <ul>
            <li>block chat</li>
            <li>unblock chat</li>
            <li>conversation</li>
          </ul>
        </div>
        <span (click)="HiddenModalMesage()"><i class="ti-close"></i></span>
      </div>
    </div>
    <div class="chat-list">
      <ul class="ps-container ps-theme-default ps-active-y" data-ps-id="3a17b8ac-7e73-8eb3-71a9-de987f2b6825">
        <li *ngFor="let x of Messages.items" [ngClass]="{'me':x.isSentByCurrentUser, 'you':!x.isSentByCurrentUser}">
          <div class="chat-thumb">
            <img *ngIf="x.sender.image; else nullImageConversation;" style="height: 30px; width: 30px;" alt="author"
              src="https://localhost:7261/Users/{{x.sender.image}}">
            <ng-template #nullImageConversation>
              <img style="height: 39px; width: 30px;" alt="author" src="./assets/images/userDefault.png">
            </ng-template>
          </div>
          <div class="notification-event">
            <span class="chat-message-item">
              <span [innerHTML]="x.content"></span>
            </span>
            <span class="notification-date"><time class="entry-date updated">{{x.created}}</time></span>
          </div>
        </li>
        <div class="ps-scrollbar-x-rail" style="left: 0px; bottom: -106px;">
          <div class="ps-scrollbar-x" tabindex="0" style="left: 0px; width: 0px;"></div>
        </div>
        <div class="ps-scrollbar-y-rail" style="top: 106px; height: 290px; right: 0px;">
          <div class="ps-scrollbar-y" tabindex="0" style="top: 78px; height: 212px;"></div>
        </div>
      </ul>
      <div style="width: 100%;background-color: #f0f0f0; border-top-left-radius: 16px; border-top-right-radius: 16px;"
        class="chat-message-item" *ngIf="imageMessageSrcs.length > 0">
        <img *ngFor="let imageSrc of imageMessageSrcs" [src]="imageSrc" style="width: 60px;height: 60px;" />
      </div>
      <form class="text-box">
        <textarea rows="2" [(ngModel)]="CreateMessageRequest.content" name="message"
          placeholder="Post enter to post...">
        </textarea>

        <div class="add-smiles">
          <div class="attachments">
            <ul>
              <li>
                <span (click)="ToggleEmoji()" title="add icon" class="em em-expressionless"></span>
              </li>

              <li>
                <i class="fa fa-image"></i>
                <label class="fileContainer">
                  <input type="file" (change)="onFilesSelected($event)" multiple>
                </label>
              </li>
              <li>
                <i (click)="SendMessage()" class="fa fa-paper-plane"></i>
              </li>

            </ul>
          </div>

          <div [ngClass]="{'isDisplay':toggleEmoji}" class="smiles-bunch">
            <i (click)="addEmoji('👍')" class="em em---1"></i>
            <i (click)="addEmoji('😃')" class="em em-smiley"></i>
            <i (click)="addEmoji('😧')" class="em em-anguished"></i>
            <i (click)="addEmoji('😂')" class="em em-laughing"></i>
            <i (click)="addEmoji('😡')" class="em em-angry"></i>
            <i (click)="addEmoji('😲')" class="em em-astonished"></i>
            <i (click)="addEmoji('😊')" class="em em-blush"></i>
            <i (click)="addEmoji('😞')" class="em em-disappointed"></i>
            <i (click)="addEmoji('😟')" class="em em-worried"></i>
            <i (click)="addEmoji('😘')" class="em em-kissing_heart"></i>
            <i (click)="addEmoji('😡')" class="em em-rage"></i>
            <i (click)="addEmoji('😛')" class="em em-stuck_out_tongue"></i>
          </div>
        </div>
        <button type="submit"></button>
      </form>

    </div>
  </div>

</div>